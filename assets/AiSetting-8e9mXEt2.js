import{b as h,c as x,d as we,e as ee,f as p,h as le,I as oe,k as d,l as r,v as N,p as ue,i as te,j as Oe,P as se,Q as ae,n as S,R as Te,S as M,m as de,r as E,q as Re}from"./@ionic-BlOSn4K8.js";import{r as $e,B as Ae,$ as Je}from"./ionicons-BNaAj5CL.js";import{g as Ue,k as Be,l as re,m as i,a as Pe}from"./index-DSS_-KSe.js";import{d as je,r as u,b as De,E as y,G as f,N as t,x as o,u as l,a4 as n,a1 as V,K as ie,O as me,a3 as g,F as pe,L as b}from"./@vue-1j5V9ATP.js";import"./@stencil-aO5Kz_I1.js";import"./@capacitor-71twbG14.js";import"./vue-router-BhiBZbuw.js";import"./gun-CAGFU2fD.js";import"./crypto-js-DmjU-BZd.js";import"./crypto-browserify-C9XFfT4E.js";import"./randombytes-DQl30_EW.js";import"./safe-buffer-Dz9_wJWQ.js";import"./buffer-CVOZ7zW9.js";import"./base64-js-DRz5BQNA.js";import"./ieee754-vIlwft-x.js";import"./create-hash-B063_hpA.js";import"./inherits-BICa84dG.js";import"./md5.js-B29Dc_Nx.js";import"./readable-stream-C5Rk_es1.js";import"./events-DQ172AOg.js";import"./asn1.js-oxGS5Nmj.js";import"./bn.js-DD1nT_11.js";import"./minimalistic-assert-OF9c2MWr.js";import"./util-deprecate-CEVJdCkT.js";import"./ripemd160-DaNrfoId.js";import"./sha.js-Dogc97cV.js";import"./cipher-base-eSATX2QK.js";import"./string_decoder-Ctm-PuQo.js";import"./create-hmac-trouak1Q.js";import"./browserify-sign-MyTigHY5.js";import"./process-nextick-args-hr2U_nH5.js";import"./core-util-is-BN-cVg0g.js";import"./browserify-rsa-UkMojkMi.js";import"./elliptic-Bqt5Hn4D.js";import"./minimalistic-crypto-utils-DpWPKLSp.js";import"./brorand-CHF3owTL.js";import"./hash.js-BBtLUDa5.js";import"./hmac-drbg-D0HEHpYb.js";import"./parse-asn1-Cz04GAcF.js";import"./evp_bytestokey-DjgKyOqD.js";import"./browserify-aes-D3s62Asp.js";import"./buffer-xor-B2N0t8YZ.js";import"./pbkdf2-DJi29hWC.js";import"./browserify-cipher-CgPgGKGD.js";import"./browserify-des-BcTqHZxs.js";import"./des.js--dPkMxQq.js";import"./diffie-hellman-CqgX2C0K.js";import"./miller-rabin-BP8PCMFw.js";import"./create-ecdh-CisUcwV7.js";import"./public-encrypt-ROujJhDd.js";import"./randomfill-xIMceVq4.js";import"./@vueuse-DWU7OkD5.js";import"./qrcode-cp1lJVLl.js";import"./dijkstrajs-C00ieaqj.js";import"./gun-avatar-BI4cJ9zF.js";import"./three-D9mDydWL.js";import"./uuid-BToUZ8VQ.js";import"./vue3-carousel-BbCZQx5h.js";import"./@capacitor-community-MIMArbib.js";import"./@zxing-CCBFSrSi.js";import"./ts-custom-error-DySZk_Wu.js";import"./dayjs-DbHR3-9z.js";import"./lodash-EBmjWABo.js";import"./pinyin-pro-BQzG8Xr9.js";import"./capacitor-voice-recorder-B3Tk3spu.js";import"./capacitor-blob-writer-As5Z23wW.js";import"./get-blob-duration-D6d9I7jF.js";import"./vue-i18n-cP7Khmb0.js";import"./@intlify-DKlaEl5K.js";import"./marked-DnqeYqt2.js";import"./dompurify-CQxFTTsi.js";import"./highlight.js-Ba2Af6Ij.js";import"./rxjs-C652p1j6.js";import"./tslib-HUEVnuZl.js";import"./pinia-ARKsHCGx.js";import"./webrtc-adapter-D1TIcEE-.js";import"./jeep-sqlite-DSwqUCw4.js";import"./vue-virtual-scroller-BMh6d78O.js";import"./vue-resize-C5R6-A0N.js";import"./vue-observe-visibility-DwEHa27i.js";import"./vue-lazyload-Cucoqqf2.js";import"./vue-image-lightbox-BMNpmAvl.js";import"./vue3-photo-preview-zkowI1gh.js";const xe={class:"flex flex-col h-full"},_e={slot:"content"},Le={slot:"content"},Ge={slot:"content"},Fe={slot:"content"},qe={slot:"content"},He={slot:"content"},Ke={slot:"content"},m="http://localhost:3939",Qe=je({__name:"AiSetting",setup(ze){const{storageServ:fe,buddyList:ve,getAliasRealtime:ye}=Ue(),v=Be(fe),_=u(v.state.isEnabled),ne=u(v.state.enabledBuddies),C=u(v.state.settings.model),L=u(v.state.settings.mode),G=u(v.state.settings.stream),F=u(v.state.settings.replyDelay),O=u(!1),T=u(!1),R=u([]),$=u(""),A=u(""),q=u(!1),I=u(""),H=u(""),J=u(""),K=u(""),Q=u(""),U=u(""),z=u(""),B=u(null),P=u(""),W=u(!1),c=u(""),j=u(""),X=u(!1),k=u(""),Y=u(""),Z=u(""),D=u(null),ge=async()=>{R.value=await re(),R.value.length&&!C.value&&(C.value=R.value[0],w())},Se=async()=>{await v.toggleAutoReply(_.value)},Ve=async(s,e)=>{await v.toggleBuddyAutoReply(s,e),ne.value=v.state.enabledBuddies},w=async()=>{await v.updateSettings({model:C.value,mode:L.value,stream:G.value,replyDelay:Number(F.value)})},Me=async()=>{if(I.value="",q.value){const s=new EventSource("".concat(m,"/api/models/create"));s.onmessage=e=>{const a=JSON.parse(e.data);I.value+=JSON.stringify(a)+"\n"},s.onerror=()=>{s.close(),i("Error creating model","error")},await fetch("".concat(m,"/api/models/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:$.value,modelfile:A.value,stream:!0})})}else try{const e=await(await fetch("".concat(m,"/api/models/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:$.value,modelfile:A.value})})).json();I.value=JSON.stringify(e),i("Model created successfully","success")}catch(s){I.value="Error creating model",i("Error creating model","error")}},Ee=async()=>{try{const e=await(await fetch("".concat(m,"/api/models/").concat(H.value),{method:"DELETE"})).json();J.value=e.message||e.error,i(e.message||"Model deleted successfully",e.error?"error":"success")}catch(s){J.value="Error deleting model",i("Error deleting model","error")}},be=async()=>{try{const e=await(await fetch("".concat(m,"/api/models/copy"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:K.value,destination:Q.value})})).json();U.value=e.message||e.error,i(e.message||"Model copied successfully",e.error?"error":"success")}catch(s){U.value="Error copying model",i("Error copying model","error")}},Ce=async()=>{try{const e=await(await fetch("".concat(m,"/api/models/").concat(z.value))).json();B.value=e,i("Model info retrieved successfully","success")}catch(s){B.value={error:"Error fetching model info"},i("Error fetching model info","error")}},Ie=async()=>{if(c.value="",W.value){const s=new EventSource("".concat(m,"/api/models/pull"));s.onmessage=e=>{const a=JSON.parse(e.data);c.value+=JSON.stringify(a)+"\n"},s.onerror=()=>{s.close(),i("Error pulling model","error")},await fetch("".concat(m,"/api/models/pull"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:P.value,stream:!0})})}else try{const e=await(await fetch("".concat(m,"/api/models/pull"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:P.value})})).json();c.value=JSON.stringify(e),i("Model pulled successfully","success")}catch(s){c.value="Error pulling model",i("Error pulling model","error")}},ce=async()=>{if(k.value="",X.value){const s=new EventSource("".concat(m,"/api/models/push"));s.onmessage=e=>{const a=JSON.parse(e.data);k.value+=JSON.stringify(a)+"\n"},s.onerror=()=>{s.close(),i("Error pushing model","error")},await fetch("".concat(m,"/api/models/push"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j.value,stream:!0})})}else try{const e=await(await fetch("".concat(m,"/api/models/push"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j.value})})).json();k.value=JSON.stringify(e),i("Model pushed successfully","success")}catch(s){k.value="Error pushing model",i("Error pushing model","error")}},ke=async()=>{try{const e=await(await fetch("".concat(m,"/api/embeddings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Y.value,prompt:Z.value})})).json();D.value=e,i("Embeddings generated successfully","success")}catch(s){D.value={error:"Error generating embeddings"},i("Error generating embeddings","error")}};return De(()=>{re()}),(s,e)=>(f(),y(l(Re),null,{default:t(()=>[o(l(oe),null,{default:t(()=>[o(l(h),null,{default:t(()=>[o(l(x),{slot:"start"},{default:t(()=>[o(l(we),{color:"dark"})]),_:1}),o(l(ee),null,{default:t(()=>e[24]||(e[24]=[n("AI Auto-Reply Configuration")])),_:1}),o(l(x),{slot:"end"},{default:t(()=>[o(l(p),{onClick:ge},{default:t(()=>[o(l(le),{icon:l($e)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),o(l(te),{fullscreen:!0},{default:t(()=>[V("div",xe,[o(l(d),{class:"ion-padding"},{default:t(()=>[o(l(r),null,{default:t(()=>e[25]||(e[25]=[n("Enable AI Auto-Reply")])),_:1}),o(l(N),{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),onIonChange:Se},null,8,["modelValue"])]),_:1}),o(l(d),{class:"ion-padding"},{default:t(()=>[o(l(r),null,{default:t(()=>e[26]||(e[26]=[n("Auto-Reply for Buddies")])),_:1}),o(l(p),{slot:"end",fill:"clear",onClick:e[1]||(e[1]=a=>T.value=!0)},{default:t(()=>[o(l(le),{icon:l(Ae)},null,8,["icon"])]),_:1})]),_:1}),o(l(ue),{"is-open":T.value,onDidDismiss:e[3]||(e[3]=a=>T.value=!1)},{default:t(()=>[o(l(oe),null,{default:t(()=>[o(l(h),null,{default:t(()=>[o(l(ee),null,{default:t(()=>e[27]||(e[27]=[n("Select Buddies for Auto-Reply")])),_:1}),o(l(x),{slot:"end"},{default:t(()=>[o(l(p),{onClick:e[2]||(e[2]=a=>T.value=!1)},{default:t(()=>e[28]||(e[28]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1}),o(l(te),{class:"ion-padding"},{default:t(()=>[o(l(Oe),null,{default:t(()=>[(f(!0),ie(pe,null,me(l(ve),a=>(f(),y(l(d),{key:a.pub},{default:t(()=>[o(l(r),null,{default:t(()=>[n(g(l(ye)(a.pub)||a.pub.slice(0,8)),1)]),_:2},1024),o(l(N),{checked:ne.value.includes(a.pub),onIonChange:Ne=>Ve(a.pub,Ne.detail.checked)},null,8,["checked","onIonChange"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["is-open"]),o(l(d),{class:"ion-padding"},{default:t(()=>[o(l(r),null,{default:t(()=>[n("Selected Model: "+g(C.value||"None"),1)]),_:1}),o(l(se),{modelValue:C.value,"onUpdate:modelValue":e[4]||(e[4]=a=>C.value=a),placeholder:"Select a model",interface:"popover",onIonChange:w},{default:t(()=>[(f(!0),ie(pe,null,me(R.value,a=>(f(),y(l(ae),{key:a,value:a},{default:t(()=>[n(g(a),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),o(l(p),{slot:"end",fill:"clear",onClick:e[5]||(e[5]=a=>O.value=!0)},{default:t(()=>[o(l(le),{icon:l(Je)},null,8,["icon"])]),_:1})]),_:1}),o(l(ue),{"is-open":O.value,onDidDismiss:e[10]||(e[10]=a=>O.value=!1)},{default:t(()=>[o(l(oe),null,{default:t(()=>[o(l(h),null,{default:t(()=>[o(l(ee),null,{default:t(()=>e[29]||(e[29]=[n("AI Settings")])),_:1}),o(l(x),{slot:"end"},{default:t(()=>[o(l(p),{onClick:e[6]||(e[6]=a=>O.value=!1)},{default:t(()=>e[30]||(e[30]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1}),o(l(te),{class:"ion-padding"},{default:t(()=>[o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[31]||(e[31]=[n("Mode")])),_:1}),o(l(se),{modelValue:L.value,"onUpdate:modelValue":e[7]||(e[7]=a=>L.value=a),placeholder:"Select mode",onIonChange:w},{default:t(()=>[o(l(ae),{value:"chat"},{default:t(()=>e[32]||(e[32]=[n("Chat")])),_:1}),o(l(ae),{value:"generate"},{default:t(()=>e[33]||(e[33]=[n("Generate")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[34]||(e[34]=[n("Stream")])),_:1}),o(l(N),{modelValue:G.value,"onUpdate:modelValue":e[8]||(e[8]=a=>G.value=a),onIonChange:w},null,8,["modelValue"])]),_:1}),o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[35]||(e[35]=[n("Reply Delay (ms)")])),_:1}),o(l(S),{type:"number",modelValue:F.value,"onUpdate:modelValue":e[9]||(e[9]=a=>F.value=a),placeholder:"Enter delay in milliseconds",onIonChange:w},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["is-open"]),o(l(Te),{class:"ion-padding"},{default:t(()=>[o(l(M),{value:"create"},{default:t(()=>[o(l(d),{slot:"header"},{default:t(()=>[o(l(r),null,{default:t(()=>e[36]||(e[36]=[n("Create Model")])),_:1})]),_:1}),V("div",_e,[o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[37]||(e[37]=[n("Name")])),_:1}),o(l(S),{modelValue:$.value,"onUpdate:modelValue":e[11]||(e[11]=a=>$.value=a),placeholder:"Enter model name"},null,8,["modelValue"])]),_:1}),o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[38]||(e[38]=[n("Modelfile")])),_:1}),o(l(de),{modelValue:A.value,"onUpdate:modelValue":e[12]||(e[12]=a=>A.value=a),placeholder:"Enter modelfile content"},null,8,["modelValue"])]),_:1}),o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[39]||(e[39]=[n("Stream")])),_:1}),o(l(N),{modelValue:q.value,"onUpdate:modelValue":e[13]||(e[13]=a=>q.value=a)},null,8,["modelValue"])]),_:1}),o(l(p),{onClick:Me},{default:t(()=>e[40]||(e[40]=[n("Create Model")])),_:1}),I.value?(f(),y(l(E),{key:0,class:"block mt-2"},{default:t(()=>[n(g(I.value),1)]),_:1})):b("",!0)])]),_:1}),o(l(M),{value:"delete"},{default:t(()=>[o(l(d),{slot:"header"},{default:t(()=>[o(l(r),null,{default:t(()=>e[41]||(e[41]=[n("Delete Model")])),_:1})]),_:1}),V("div",Le,[o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[42]||(e[42]=[n("Model Name")])),_:1}),o(l(S),{modelValue:H.value,"onUpdate:modelValue":e[14]||(e[14]=a=>H.value=a),placeholder:"Enter model name"},null,8,["modelValue"])]),_:1}),o(l(p),{onClick:Ee},{default:t(()=>e[43]||(e[43]=[n("Delete Model")])),_:1}),J.value?(f(),y(l(E),{key:0,class:"block mt-2"},{default:t(()=>[n(g(J.value),1)]),_:1})):b("",!0)])]),_:1}),o(l(M),{value:"copy"},{default:t(()=>[o(l(d),{slot:"header"},{default:t(()=>[o(l(r),null,{default:t(()=>e[44]||(e[44]=[n("Copy Model")])),_:1})]),_:1}),V("div",Ge,[o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[45]||(e[45]=[n("Source")])),_:1}),o(l(S),{modelValue:K.value,"onUpdate:modelValue":e[15]||(e[15]=a=>K.value=a),placeholder:"Enter source model"},null,8,["modelValue"])]),_:1}),o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[46]||(e[46]=[n("Destination")])),_:1}),o(l(S),{modelValue:Q.value,"onUpdate:modelValue":e[16]||(e[16]=a=>Q.value=a),placeholder:"Enter destination model"},null,8,["modelValue"])]),_:1}),o(l(p),{onClick:be},{default:t(()=>e[47]||(e[47]=[n("Copy Model")])),_:1}),U.value?(f(),y(l(E),{key:0,class:"block mt-2"},{default:t(()=>[n(g(U.value),1)]),_:1})):b("",!0)])]),_:1}),o(l(M),{value:"show"},{default:t(()=>[o(l(d),{slot:"header"},{default:t(()=>[o(l(r),null,{default:t(()=>e[48]||(e[48]=[n("Show Model Info")])),_:1})]),_:1}),V("div",Fe,[o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[49]||(e[49]=[n("Model Name")])),_:1}),o(l(S),{modelValue:z.value,"onUpdate:modelValue":e[17]||(e[17]=a=>z.value=a),placeholder:"Enter model name"},null,8,["modelValue"])]),_:1}),o(l(p),{onClick:Ce},{default:t(()=>e[50]||(e[50]=[n("Show Info")])),_:1}),B.value?(f(),y(l(E),{key:0,class:"block mt-2"},{default:t(()=>[n(g(JSON.stringify(B.value)),1)]),_:1})):b("",!0)])]),_:1}),o(l(M),{value:"pull"},{default:t(()=>[o(l(d),{slot:"header"},{default:t(()=>[o(l(r),null,{default:t(()=>e[51]||(e[51]=[n("Pull Model")])),_:1})]),_:1}),V("div",qe,[o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[52]||(e[52]=[n("Model Name")])),_:1}),o(l(S),{modelValue:P.value,"onUpdate:modelValue":e[18]||(e[18]=a=>P.value=a),placeholder:"Enter model name"},null,8,["modelValue"])]),_:1}),o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[53]||(e[53]=[n("Stream")])),_:1}),o(l(N),{modelValue:W.value,"onUpdate:modelValue":e[19]||(e[19]=a=>W.value=a)},null,8,["modelValue"])]),_:1}),o(l(p),{onClick:Ie},{default:t(()=>e[54]||(e[54]=[n("Pull Model")])),_:1}),c.value?(f(),y(l(E),{key:0,class:"block mt-2"},{default:t(()=>[n(g(c.value),1)]),_:1})):b("",!0)])]),_:1}),o(l(M),{value:"push"},{default:t(()=>[o(l(d),{slot:"header"},{default:t(()=>[o(l(r),null,{default:t(()=>e[55]||(e[55]=[n("Push Model")])),_:1})]),_:1}),V("div",He,[o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[56]||(e[56]=[n("Model Name")])),_:1}),o(l(S),{modelValue:j.value,"onUpdate:modelValue":e[20]||(e[20]=a=>j.value=a),placeholder:"Enter model name"},null,8,["modelValue"])]),_:1}),o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[57]||(e[57]=[n("Stream")])),_:1}),o(l(N),{modelValue:X.value,"onUpdate:modelValue":e[21]||(e[21]=a=>X.value=a)},null,8,["modelValue"])]),_:1}),o(l(p),{onClick:ce},{default:t(()=>e[58]||(e[58]=[n("Push Model")])),_:1}),k.value?(f(),y(l(E),{key:0,class:"block mt-2"},{default:t(()=>[n(g(k.value),1)]),_:1})):b("",!0)])]),_:1}),o(l(M),{value:"embeddings"},{default:t(()=>[o(l(d),{slot:"header"},{default:t(()=>[o(l(r),null,{default:t(()=>e[59]||(e[59]=[n("Generate Embeddings")])),_:1})]),_:1}),V("div",Ke,[o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[60]||(e[60]=[n("Model")])),_:1}),o(l(S),{modelValue:Y.value,"onUpdate:modelValue":e[22]||(e[22]=a=>Y.value=a),placeholder:"Enter model name"},null,8,["modelValue"])]),_:1}),o(l(d),null,{default:t(()=>[o(l(r),null,{default:t(()=>e[61]||(e[61]=[n("Prompt")])),_:1}),o(l(de),{modelValue:Z.value,"onUpdate:modelValue":e[23]||(e[23]=a=>Z.value=a),placeholder:"Enter prompt"},null,8,["modelValue"])]),_:1}),o(l(p),{onClick:ke},{default:t(()=>e[62]||(e[62]=[n("Generate Embeddings")])),_:1}),D.value?(f(),y(l(E),{key:0,class:"block mt-2"},{default:t(()=>[n(g(JSON.stringify(D.value)),1)]),_:1})):b("",!0)])]),_:1})]),_:1})])]),_:1})]),_:1}))}}),ko=Pe(Qe,[["__scopeId","data-v-173d7e47"]]);export{ko as default};
//# sourceMappingURL=AiSetting-8e9mXEt2.js.map
