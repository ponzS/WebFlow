{"version":3,"file":"base64-Db1dxkjP.js","sources":["../../src/composables/useImageToBase64.ts","../../src/pages/base64.vue"],"sourcesContent":["import { ref, Ref } from 'vue';\n//This is a no encrypted version. When using it, please use SEA for encryption before executing the sending instruction.\n\nexport function useImageToBase64() {\n  const base64String: Ref<string> = ref('');\n  const error: Ref<string | null> = ref(null);\n\n\n  const convertToBase64 = (file: File): Promise<void> => {\n    return new Promise((resolve, reject) => {\n      if (!file.type.startsWith('image/')) {\n        error.value = 'only support image file';\n        reject(new Error('only support image file'));\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.onload = () => {\n        base64String.value = reader.result as string;\n        error.value = null;\n        resolve();\n      };\n      reader.onerror = () => {\n        error.value = 'image read failed';\n        reject(new Error('image read failed'));\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n\n  // handle file input\n  const handleFileInput = async (event: Event) => {\n    const input = event.target as HTMLInputElement;\n    if (!input.files || input.files.length === 0) {\n      error.value = 'no file selected';\n      return;\n    }\n\n    const file = input.files[0];\n    try {\n      await convertToBase64(file);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  // set Base64 string from text input\n  const setBase64FromText = (value: string) => {\n    if (isValidBase64Image(value)) {\n      base64String.value = value;\n      error.value = null;\n    } else {\n      error.value = 'invalid Base64 image string';\n      base64String.value = '';\n    }\n  };\n\n  // validate if it is a valid Base64 image string\n  const isValidBase64Image = (str: string): boolean => {\n    const imageRegex = /^data:image\\/(jpeg|png|gif|bmp|webp);base64,/i;\n    return imageRegex.test(str);\n  };\n\n  // clear Base64 and error\n  const clear = () => {\n    base64String.value = '';\n    error.value = null;\n  };\n\n  return {\n    base64String,\n    error,\n    convertToBase64,\n    handleFileInput,\n    setBase64FromText,\n    isValidBase64Image,\n    clear,\n  };\n}","<template>\n    <ion-page>\n      <ion-content :fullscreen=\"true\" class=\"converter-content\">\n        <div class=\"image-to-base64-converter\">\n          <!-- 返回按钮 -->\n          <div class=\"back-button-container\">\n            <div class=\"back-button\" @click=\"goBack\">\n              <div class=\"i-material-symbols-arrow-back-ios-new-rounded\"></div>\n            </div>\n          </div>\n  \n          <!-- 主内容区域 -->\n          <div class=\"content-wrapper\">\n            <!-- 文件输入 -->\n            <div class=\"input-section\">\n              <label class=\"label\">Upload Image</label>\n              <div class=\"file-input-wrapper\">\n                <input\n                  type=\"file\"\n                  id=\"imageInput\"\n                  accept=\"image/*\"\n                  ref=\"fileInputRef\"\n                  @change=\"handleFileInput\"\n                />\n                <button class=\"modern-button upload-btn\" @click=\"triggerFileInput\" :disabled=\"isProcessing\">\n                  <svg class=\"icon\" viewBox=\"0 0 24 24\">\n                    <path d=\"M12 2l-5.5 9h11zm0 2.83v6.17h2v-6.17zm-1 9.17h2v6h-2z\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n  \n            <!-- Base64 输入 -->\n            <div class=\"input-section\">\n              <label class=\"label\">Base64 Input</label>\n              <textarea\n                v-model=\"inputBase64\"\n                placeholder=\"Paste Base64 string here...\"\n                class=\"liquid-textarea\"\n                @input=\"updateBase64FromText\"\n                :disabled=\"isProcessing\"\n              ></textarea>\n            </div>\n  \n            <!-- 错误信息 -->\n            <p v-if=\"error\" class=\"error-text\">{{ error }}</p>\n  \n            <!-- Base64 输出 -->\n            <div class=\"output-section\" v-if=\"base64String\">\n              <label class=\"label\">Base64 Output</label>\n              <div class=\"output-wrapper\">\n                <textarea\n                  :value=\"base64String\"\n                  readonly\n                  class=\"liquid-textarea output\"\n                ></textarea>\n                <button class=\"modern-button copy-btn\" @click=\"copyBase64\" :disabled=\"isProcessing\">\n                  <svg class=\"icon\" viewBox=\"0 0 24 24\">\n                    <path d=\"M16 1H4v16h2V3h10zm-1 4l6 6v10H8V5zm2 14h2v-6h-6v6h4z\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n  \n            <!-- 预览 -->\n            <div class=\"preview-section\" v-if=\"base64String && isValidBase64Image(base64String)\">\n              <label class=\"label\">Preview</label>\n              <div class=\"image-wrapper\">\n                <img :src=\"base64String\" alt=\"Preview\" class=\"liquid-image\" @load=\"onImageLoad\" />\n              </div>\n            </div>\n  \n            <!-- 清除按钮 -->\n            <button v-if=\"base64String || error\" class=\"modern-button clear-btn\" @click=\"clear1\" :disabled=\"isProcessing\">\n              <svg class=\"icon\" viewBox=\"0 0 24 24\">\n                <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\" />\n              </svg>\n            </button>\n          </div>\n  \n          <!-- 加载动画 -->\n          <transition name=\"liquid-fade\">\n            <div v-if=\"isProcessing\" class=\"fullscreen-loader\">\n              <div class=\"liquid-circle\"></div>\n              <div class=\"liquid-circle delayed\"></div>\n            </div>\n          </transition>\n  \n          <!-- 背景光晕装饰 -->\n          <div class=\"glow-circle glow-1\"></div>\n          <div class=\"glow-circle glow-2\"></div>\n          <div class=\"glow-circle glow-3\"></div>\n        </div>\n      </ion-content>\n    </ion-page>\n  </template>\n  \n  <script setup lang=\"ts\">\n  import { ref, watch } from 'vue';\n  import { useRouter } from 'vue-router';\n  import { useImageToBase64 } from '@/composables/useImageToBase64';\n  import { IonPage, IonContent } from '@ionic/vue';\n  \n  const { base64String, error, convertToBase64, setBase64FromText, isValidBase64Image, clear } = useImageToBase64();\n  const router = useRouter();\n  const fileInputRef = ref<HTMLInputElement | null>(null);\n  const inputBase64 = ref('');\n  const isProcessing = ref(false);\n  \n  const showToast = (message: string, type: 'success' | 'error' = 'success') => {\n    const toast = document.createElement('ion-toast');\n    toast.message = message;\n    toast.duration = 2000;\n    toast.position = 'bottom';\n    toast.cssClass = `custom-toast ${type}`;\n    document.body.appendChild(toast);\n    return toast.present();\n  };\n  \n  const triggerFileInput = () => {\n    if (fileInputRef.value && !isProcessing.value) {\n      fileInputRef.value.click();\n    }\n  };\n  \n  const handleFileInput = async (event: Event) => {\n    const input = event.target as HTMLInputElement;\n    if (!input.files || input.files.length === 0) return;\n  \n    const file = input.files[0];\n    isProcessing.value = true;\n  \n    try {\n      await convertToBase64(file);\n      await new Promise(resolve => setTimeout(resolve, 1000));\n    } catch (err) {\n      console.error(err);\n    } finally {\n      isProcessing.value = false;\n      if (input) input.value = '';\n    }\n  };\n  \n  const updateBase64FromText = async () => {\n    if (isProcessing.value) return;\n    isProcessing.value = true;\n    try {\n      setBase64FromText(inputBase64.value.trim());\n      await new Promise(resolve => setTimeout(resolve, 1000));\n    } finally {\n      isProcessing.value = false;\n    }\n  };\n  \n  const copyBase64 = () => {\n    if (base64String.value && !isProcessing.value) {\n      navigator.clipboard.writeText(base64String.value).then(() => {\n        showToast('Base64 copied to clipboard', 'success');\n      }).catch(() => {\n        showToast('Copy failed', 'error');\n      });\n    }\n  };\n  \n  const onImageLoad = () => {\n    isProcessing.value = false;\n  };\n  \n  const clear1 = () => {\n    if (!isProcessing.value) {\n      isProcessing.value = false;\n      clear();\n    }\n  };\n  \n  const goBack = () => {\n    router.go(-1);\n  };\n  \n  watch(base64String, (newValue) => {\n    if (newValue !== inputBase64.value) {\n      inputBase64.value = newValue;\n    }\n  });\n  </script>\n  \n  <style scoped>\n  .converter-content {\n    --background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);\n    height: 100%;\n    overflow-y: auto;\n  }\n  \n  .image-to-base64-converter {\n    padding: 20px;\n    max-width: 600px;\n    margin: 0 auto;\n    font-family: 'Arial', sans-serif;\n    position: relative;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  /* 返回按钮 */\n  .back-button-container {\n    position: fixed;\n    top: 70px;\n    left: 20px;\n    z-index: 9999;\n  }\n  \n  .back-button {\n    background-color: rgba(127, 127, 127, 0.24);\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    padding-right: 4px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.3s ease-in-out;\n    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n    backdrop-filter: blur(10px);\n  }\n  \n  .back-button:active {\n    background-color: #5151E5;\n    transform: scale(0.95);\n  }\n  \n  .i-material-symbols-arrow-back-ios-new-rounded {\n    --un-icon: url(\"data:image/svg+xml;utf8,%3Csvg viewBox='0 0 24 24' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='m9.55 12l7.35 7.35q.375.375.363.875t-.388.875t-.875.375t-.875-.375l-7.7-7.675q-.3-.3-.45-.675t-.15-.75t.15-.75t.45-.675l7.7-7.7q.375-.375.888-.363t.887.388t.375.875t-.375.875z'/%3E%3C/svg%3E\");\n    -webkit-mask: var(--un-icon) no-repeat;\n    mask: var(--un-icon) no-repeat;\n    -webkit-mask-size: 100% 100%;\n    mask-size: 100% 100%;\n    background-color: #ffffff;\n    width: 1.2em;\n    height: 1.2em;\n  }\n  \n  /* 主内容区域 */\n  .content-wrapper {\n    margin-top: 120px; /* 确保内容在返回按钮下方 */\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 25px;\n    padding-bottom: 40px;\n  }\n  \n  /* 输入和输出部分 */\n  .input-section {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  }\n  \n  .label {\n    color: rgba(255, 255, 255, 0.8);\n    font-size: 14px;\n    font-weight: 400;\n  }\n  \n  .file-input-wrapper {\n    position: relative;\n  }\n  \n  input[type=\"file\"] {\n    display: none;\n  }\n  \n  .liquid-textarea {\n    width: 100%;\n    min-height: 120px;\n    padding: 12px;\n    border-radius: 12px;\n    background: rgba(255, 255, 255, 0.1);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    color: #ffffff;\n    font-size: 14px;\n    resize: vertical;\n    transition: all 0.3s ease;\n    backdrop-filter: blur(10px);\n  }\n  \n  .liquid-textarea:focus {\n    outline: none;\n    border-color: rgba(0, 205, 137, 0.5);\n    box-shadow: 0 0 8px rgba(0, 205, 137, 0.2);\n  }\n  \n  .liquid-textarea:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n  \n  .liquid-textarea.output {\n    background: rgba(255, 255, 255, 0.05);\n    cursor: not-allowed;\n  }\n  \n  .output-section {\n    position: relative;\n  }\n  \n  .output-wrapper {\n    position: relative;\n  }\n  \n  .preview-section {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n  }\n  \n  .image-wrapper {\n    position: relative;\n    display: inline-block;\n  }\n  \n  .liquid-image {\n    max-width: 100%;\n    max-height: 300px;\n    border-radius: 12px;\n    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n    transition: opacity 0.3s ease;\n  }\n  \n  .error-text {\n    color: #ff6b6b;\n    font-size: 14px;\n    text-align: center;\n    background: rgba(255, 107, 107, 0.1);\n    padding: 6px 12px;\n    border-radius: 8px;\n    backdrop-filter: blur(5px);\n  }\n  \n  /* 按钮样式 */\n  .modern-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 6px;\n    padding: 8px 16px;\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    border-radius: 8px;\n    background: rgba(255, 255, 255, 0.1);\n    color: #ffffff;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\n    backdrop-filter: blur(10px);\n  }\n  \n  .modern-button:hover:not(:disabled) {\n    background: rgba(255, 255, 255, 0.2);\n    transform: translateY(-1px);\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n  }\n  \n  .modern-button:active:not(:disabled) {\n    transform: translateY(1px);\n    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\n  }\n  \n  .modern-button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n  \n  .upload-btn {\n    align-self: flex-start;\n  }\n  \n  .copy-btn {\n    position: absolute;\n    right: 10px;\n    top: 10px;\n  }\n  \n  .clear-btn {\n    align-self: center;\n    margin-top: 20px;\n  }\n  \n  .icon {\n    width: 18px;\n    height: 18px;\n    fill: #ffffff;\n  }\n  \n  /* 全屏加载动画 */\n  .fullscreen-loader {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.7);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 1000;\n  }\n  \n  .liquid-circle {\n    width: 80px;\n    height: 80px;\n    background: radial-gradient(circle, rgba(0, 205, 137, 0.5) 10%, transparent 70%);\n    border-radius: 50%;\n    animation: liquidMorph 2s ease-in-out infinite;\n  }\n  \n  .liquid-circle.delayed {\n    animation-delay: 0.5s;\n    background: radial-gradient(circle, rgba(35, 213, 171, 0.5) 10%, transparent 70%);\n  }\n  \n  /* 光晕效果 */\n  .glow-circle {\n    position: absolute;\n    border-radius: 50%;\n    filter: blur(60px);\n    opacity: 0.3;\n    animation: float 8s ease-in-out infinite;\n    z-index: 1;\n  }\n  \n  .glow-1 {\n    width: 300px;\n    height: 300px;\n    background: radial-gradient(circle, #00cd89 0%, transparent 70%);\n    top: 10%;\n    left: 20%;\n    animation-delay: 0s;\n  }\n  \n  .glow-2 {\n    width: 400px;\n    height: 400px;\n    background: radial-gradient(circle, #23d5ab 0%, transparent 70%);\n    bottom: 15%;\n    right: 15%;\n    animation-delay: 2s;\n  }\n  \n  .glow-3 {\n    width: 250px;\n    height: 250px;\n    background: radial-gradient(circle, #52eed1 0%, transparent 70%);\n    top: 50%;\n    left: 50%;\n    animation-delay: 4s;\n  }\n  \n  /* Toast 样式 */\n  .custom-toast.success {\n    --background: rgba(46, 204, 113, 0.9);\n    --color: #ffffff;\n    --border-radius: 12px;\n    backdrop-filter: blur(10px);\n  }\n  \n  .custom-toast.error {\n    --background: rgba(231, 76, 60, 0.9);\n    --color: #ffffff;\n    --border-radius: 12px;\n    backdrop-filter: blur(10px);\n  }\n  \n  /* 动画 */\n  .liquid-fade-enter-active,\n  .liquid-fade-leave-active {\n    transition: opacity 0.3s ease;\n  }\n  \n  .liquid-fade-enter-from,\n  .liquid-fade-leave-to {\n    opacity: 0;\n  }\n  \n  @keyframes liquidMorph {\n    0% { transform: scale(1) rotate(0deg); border-radius: 50% 50% 50% 50%; }\n    25% { transform: scale(1.1) rotate(90deg); border-radius: 60% 40% 50% 50%; }\n    50% { transform: scale(1) rotate(180deg); border-radius: 50% 50% 40% 60%; }\n    75% { transform: scale(1.1) rotate(270deg); border-radius: 40% 60% 60% 40%; }\n    100% { transform: scale(1) rotate(360deg); border-radius: 50% 50% 50% 50%; }\n  }\n  \n  @keyframes float {\n    0% { transform: translateY(0) scale(1); opacity: 0.3; }\n    50% { transform: translateY(-20px) scale(1.05); opacity: 0.5; }\n    100% { transform: translateY(0) scale(1); opacity: 0.3; }\n  }\n  </style>"],"names":["useImageToBase64","base64String","ref","error","convertToBase64","file","resolve","reject","reader","handleFileInput","event","input","err","setBase64FromText","value","isValidBase64Image","str","clear","router","useRouter","fileInputRef","inputBase64","isProcessing","showToast","message","type","toast","triggerFileInput","updateBase64FromText","copyBase64","onImageLoad","clear1","goBack","watch","newValue"],"mappings":"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"}